<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IPL Admin Panel</title>
<style>
body{font-family:sans-serif;margin:0;padding:0;background:#f0f0f0;}
.container{max-width:900px;margin:20px auto;padding:20px;background:#fff;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.2);}
header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;background:#333545;color:#fff;padding:10px;border-radius:10px 10px 0 0;}
header h3{margin:0;font-size:16px;}
header button{padding:6px 12px;background:#f84464;color:#fff;border:none;border-radius:5px;cursor:pointer;margin-top:5px;}
header button:hover{background:#c4242b;}
form input,form button,form label{padding:10px;margin:5px 0;border-radius:5px;border:1px solid #ccc;font-size:14px;width:100%;box-sizing:border-box;}
form button{background:#f84464;color:#fff;border:none;cursor:pointer;}
form button:hover{background:#c4242b;}
table{width:100%;border-collapse:collapse;margin-top:20px;font-size:12px;}
th,td{border:1px solid #ccc;padding:8px;text-align:center;}
img.preview{width:50px;height:50px;object-fit:contain;border-radius:5px;}
button.edit{background:#4caf50;color:#fff;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;font-size:12px;}
button.edit:hover{background:#388e3c;}
button.delete{background:#f44336;color:#fff;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;font-size:12px;}
button.delete:hover{background:#c4242b;}
#loginBox{background:#fff;padding:20px;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.2);width:90%;max-width:350px;margin:50px auto;text-align:center;}
#loginBox input{width:100%;padding:10px;margin:10px 0;border-radius:6px;border:1px solid #ccc;}
#loginBox button{width:100%;padding:11px;background:#f84464;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:16px;}
#loginBox button:hover{background:#c4242b;}
input[type="text"][id$="_url"] { background: #ffebee; border-color: #f84464; }
</style>
</head>
<body>

<div id="loginBox">
<h2>Admin Login</h2>
<input type="text" id="username" placeholder="Phone / Username">
<input type="password" id="password" placeholder="Password">
<button onclick="login()">Login</button>
<p style="font-size:12px;color:#666;margin-top:10px;">Demo: <strong>7627055204</strong> / <strong>Pooja2005</strong></p>
</div>

<div class="container" id="dashboard" style="display:none;">
<header>
<h3>Admin Dashboard - <span id="adminUser"></span></h3>
<button onclick="logout()">Logout</button>
</header>

<h2>Update Banner</h2>
<form id="bannerForm">
<label>Upload Banner Image:</label>
<input type="file" id="bannerInput" accept="image/*">
<img id="bannerPreview" class="preview" style="display:none;">
<button type="submit">Save Banner</button>
</form>

<h2>Update IPL Logo</h2>
<form id="logoForm">
<label>Upload IPL/Tournament Logo:</label>
<input type="file" id="logoInput" accept="image/*">
<img id="logoPreview" class="preview" style="display:none;">
<button type="submit">Save Logo</button>
</form>

<h2>Manage Matches</h2>
<form id="matchForm">
<input type="text" id="teams" placeholder="Team1 vs Team2" required>
<input type="date" id="date" required>
<input type="time" id="time" required>
<input type="text" id="stadium" placeholder="Stadium" required>

<label>Team1 Image (Upload or URL):</label>
<input type="file" id="img1_file" accept="image/*" onchange="previewImage(this, 'preview1')">
<input type="text" id="img1_url" placeholder="Paste Image URL for Team 1">

<label>Team2 Image (Upload or URL):</label>
<input type="file" id="img2_file" accept="image/*" onchange="previewImage(this, 'preview2')">
<input type="text" id="img2_url" placeholder="Paste Image URL for Team 2">

<img id="preview1" class="preview" style="display:none;">
<img id="preview2" class="preview" style="display:none;">
<button type="submit">Save Match</button>
</form>

<table>
<thead>
<tr>
<th>#</th><th>Teams</th><th>Date</th><th>Time</th><th>Stadium</th><th>Team1 Img</th><th>Team2 Img</th><th>Actions</th>
</tr>
</thead>
<tbody id="matchesTable"></tbody>
</table>
</div>

<script>
const ADMIN_USER = "7627055204", ADMIN_PASS = "Pooja2005";
let editIndex=-1;
let matches = JSON.parse(localStorage.getItem("iplMatches"))||[]; 

function login(){
  const u=document.getElementById("username").value.trim();
  const p=document.getElementById("password").value.trim();
  if(u===ADMIN_USER&&p===ADMIN_PASS){localStorage.setItem("isAdmin","true");localStorage.setItem("adminUser",ADMIN_USER);showDashboard();}
  else alert("Invalid username or password");
}
function logout(){localStorage.removeItem("isAdmin");localStorage.removeItem("adminUser");document.getElementById("dashboard").style.display="none";document.getElementById("loginBox").style.display="block";}

function toBase64(file){return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onload=()=>resolve(reader.result);reader.onerror=(err)=>reject(err);reader.readAsDataURL(file);});}

function renderTable(){
  const tableBody=document.getElementById("matchesTable");
  tableBody.innerHTML="";
  matches.forEach((m,i)=>{
    tableBody.innerHTML+=`<tr>
      <td>${i+1}</td>
      <td>${m.teams}</td>
      <td>${m.date}</td>
      <td>${m.time}</td>
      <td><small>${m.stadium}</small></td>
      <td><img src="${m.img1 || 'placeholder'}" class="preview"></td>
      <td><img src="${m.img2 || 'placeholder'}" class="preview"></td>
      <td>
        <button class="edit" onclick="editMatch(${i})">Edit</button>
        <button class="delete" onclick="deleteMatch(${i})">Delete</button>
      </td>
    </tr>`;
  });
}

function previewImage(input, previewId) {
    const preview = document.getElementById(previewId);
    if (input.type === 'file' && input.files[0]) {
        const file = input.files[0];
        const reader = new FileReader();
        reader.onload = () => {
            preview.src = reader.result;
            preview.style.display = "inline-block";
        };
        reader.readAsDataURL(file);
    } else if (input.type === 'text' && input.value.trim()) {
        preview.src = input.value.trim();
        preview.style.display = "inline-block";
    }
}

async function saveMatch(e){
  e.preventDefault();
  const teams=document.getElementById("teams").value.trim();
  const date=document.getElementById("date").value;
  const time=document.getElementById("time").value;
  const stadium=document.getElementById("stadium").value.trim();
  
  if(!teams||!date||!time||!stadium){alert("Please fill all fields.");return;}
  
  let img1=editIndex>=0?matches[editIndex].img1:"";
  let img2=editIndex>=0?matches[editIndex].img2:"";
  
  const img1Url = document.getElementById("img1_url").value.trim();
  const img1File = document.getElementById("img1_file").files[0];

  if (img1Url) {
    img1 = img1Url;
  } else if (img1File) {
    try {img1=await toBase64(img1File);} catch (error) {console.error("Error converting img1:", error);}
  }
  
  const img2Url = document.getElementById("img2_url").value.trim();
  const img2File = document.getElementById("img2_file").files[0];

  if (img2Url) {
    img2 = img2Url;
  } else if (img2File) {
    try {img2=await toBase64(img2File);} catch (error) {console.error("Error converting img2:", error);}
  }

  const match={teams,date,time,stadium,img1,img2};
  
  if(editIndex>=0){matches[editIndex]=match;editIndex=-1;}else{matches.push(match);}
  
  localStorage.setItem("iplMatches",JSON.stringify(matches)); 
  renderTable();
  document.getElementById("matchForm").reset();
  document.getElementById("preview1").style.display="none";
  document.getElementById("preview2").style.display="none";
  alert("Match saved successfully! Refresh the index.html page to see changes.");
}


function editMatch(index){
  const m=matches[index];
  document.getElementById("teams").value=m.teams;
  document.getElementById("date").value=m.date;
  document.getElementById("time").value=m.time;
  document.getElementById("stadium").value=m.stadium;
  
  document.getElementById("img1_url").value = m.img1 && m.img1.startsWith('http') ? m.img1 : '';
  document.getElementById("img2_url").value = m.img2 && m.img2.startsWith('http') ? m.img2 : '';

  document.getElementById("preview1").src=m.img1;
  document.getElementById("preview2").src=m.img2;
  document.getElementById("preview1").style.display="inline-block";
  document.getElementById("preview2").style.display="inline-block";
  editIndex=index;
}

function deleteMatch(index){
  if(confirm("Are you sure to delete this match?")){
    matches.splice(index,1);
    localStorage.setItem("iplMatches",JSON.stringify(matches));
    renderTable();
  }
}

// Banner Logic
const bannerInput=document.getElementById("bannerInput");
const bannerPreview=document.getElementById("bannerPreview");

function loadBannerPreview() {
    const savedBanner = localStorage.getItem("bannerURL");
    if (savedBanner) {
        bannerPreview.src = savedBanner;
        bannerPreview.style.display = "inline-block";
    }
}
bannerInput.addEventListener("change",()=>{const file=bannerInput.files[0];if(file){const reader=new FileReader();reader.onload=()=>bannerPreview.src=reader.result;bannerPreview.style.display="inline-block";reader.readAsDataURL(file);}});

document.getElementById("bannerForm").addEventListener("submit",e=>{
  e.preventDefault();
  if(bannerInput.files[0]){
    const reader=new FileReader();
    reader.onload=()=>{
      localStorage.setItem("bannerURL",reader.result); 
      alert("Banner saved successfully! Refresh the index.html page to see changes.");
    };
    reader.readAsDataURL(bannerInput.files[0]);
  } else {alert("Select an image first.");}
});

// IPL Logo Logic
const logoInput = document.getElementById("logoInput");
const logoPreview = document.getElementById("logoPreview");

function loadLogoPreview() {
    const savedLogo = localStorage.getItem("iplLogoURL");
    if (savedLogo) {
        logoPreview.src = savedLogo;
        logoPreview.style.display = "inline-block";
    }
}
logoInput.addEventListener("change",()=>{
    const file = logoInput.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = () => logoPreview.src = reader.result;
        logoPreview.style.display = "inline-block";
        reader.readAsDataURL(file);
    }
});

document.getElementById("logoForm").addEventListener("submit",e=>{
  e.preventDefault();
  if(logoInput.files[0]){
    const reader=new FileReader();
    reader.onload=()=>{
      localStorage.setItem("iplLogoURL",reader.result); 
      alert("IPL Logo saved successfully!");
    };
    reader.readAsDataURL(logoInput.files[0]);
  } else {alert("Select an image first.");}
});


document.getElementById("img1_url").addEventListener("input", function() { previewImage(this, 'preview1'); });
document.getElementById("img2_url").addEventListener("input", function() { previewImage(this, 'preview2'); });


document.addEventListener("DOMContentLoaded",()=>{
  document.getElementById("matchForm").addEventListener("submit",saveMatch);
  if(localStorage.getItem("isAdmin")==="true") showDashboard();
});

function showDashboard(){
  document.getElementById("loginBox").style.display="none";
  document.getElementById("dashboard").style.display="block";
  document.getElementById("adminUser").textContent=localStorage.getItem("adminUser");
  loadBannerPreview(); 
  loadLogoPreview();
  renderTable();
}
</script>

</body>
  </html>
  
